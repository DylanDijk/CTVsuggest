<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="CTVsuggest">
<title>CTVsuggest Overview • CTVsuggest</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="CTVsuggest Overview">
<meta property="og:description" content="CTVsuggest">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CTVsuggest</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/CTVsuggest-Overview.html">CTVsuggest Overview</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/dylandijk/CTVsuggest/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>CTVsuggest Overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dylandijk/CTVsuggest/blob/HEAD/vignettes/CTVsuggest-Overview.Rmd" class="external-link"><code>vignettes/CTVsuggest-Overview.Rmd</code></a></small>
      <div class="d-none name"><code>CTVsuggest-Overview.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="objective-of-the-ctvsuggest-package">Objective of the CTVsuggest Package<a class="anchor" aria-label="anchor" href="#objective-of-the-ctvsuggest-package"></a>
</h2>
<p>The <a href="https://github.com/cran-task-views/ctv#available-task-views" class="external-link">CRAN
Task Views</a> are maintained by volunteers and are always welcome to
contributions for additional content from members of the community. Due
to the huge number of packages that are in CRAN it is infeasible for a
Task View maintainer to review all of the available packages. Therefore,
a <a href="#the-model">model</a> that would give suggestions for the
maintainer to then review would be useful.</p>
<p>The aim of CTVsuggest is to give suggestions for packages to be added
to <a href="https://github.com/cran-task-views/ctv#available-task-views" class="external-link">CRAN
Task Views</a>. There is a single function, <code><a href="../reference/CTVsuggest.html">CTVsuggest()</a></code>,
that outputs these suggestions.</p>
<!-- - The prediction probabilities are computed using [`CTVsuggestTrain::Train_model()`](https://dylandijk.github.io/CTVsuggestTrain/reference/Train_model.html) -->
</div>
<div class="section level2">
<h2 id="ctvsuggest-example">CTVsuggest Example<a class="anchor" aria-label="anchor" href="#ctvsuggest-example"></a>
</h2>
<!-- I have given the package and function the same name so that it is easy to remember, both are named **CTVsuggest**. -->
<p>First install the CTVsuggest package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DylanDijk/CTVsuggest"</span><span class="op">)</span></span></code></pre></div>
<p>Then attach the package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dylandijk.github.io/CTVsuggest/">CTVsuggest</a></span><span class="op">)</span></span></code></pre></div>
<p>To output the top 5 suggested packages for the <a href="https://github.com/cran-task-views/NaturalLanguageProcessing/" class="external-link">NaturalLanguageProcessing
Task View</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/CTVsuggest.html">CTVsuggest</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span>, taskview <span class="op">=</span> <span class="st">"NaturalLanguageProcessing"</span><span class="op">)</span></span>
<span><span class="co">#&gt;                NaturalLanguageProcessing       Packages</span></span>
<span><span class="co">#&gt; LSX                            0.9929149            LSX</span></span>
<span><span class="co">#&gt; doc2vec                        0.9819230        doc2vec</span></span>
<span><span class="co">#&gt; text.alignment                 0.9626282 text.alignment</span></span>
<span><span class="co">#&gt; jiebaRD                        0.9530279        jiebaRD</span></span>
<span><span class="co">#&gt; R.temis                        0.9166350        R.temis</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-package-workflow">The Package Workflow<a class="anchor" aria-label="anchor" href="#the-package-workflow"></a>
</h2>
<p>Alongside the CTVsuggest package there is the <a href="https://dylandijk.github.io/CTVsuggestTrain/">CTVsuggestTrain</a>
package.</p>
<p>CTVsuggestTrain contains functions which execute the training of the
model. In particular, <a href="https://dylandijk.github.io/CTVsuggestTrain/reference/Train_model.html"><code>CTVsuggestTrain::Train_model()</code></a>
trains a multinomial logistic regression model, where the outcome
categories are the available CRAN Task Views plus an additional
<code>"none"</code> category. In addition, after training the model,
<code>Train_model()</code> returns a <code>data.frame</code> containing
the predicted classification probabilities of CRAN packages to CRAN Task
Views.</p>
<p>The current workflow is that I run the <a href="https://dylandijk.github.io/CTVsuggestTrain/reference/Train_model.html"><code>CTVsuggestTrain::Train_model()</code></a>
function weekly, each time storing the <code>data.frame</code> of
predicted probabilities on the <a href="https://github.com/DylanDijk/CTVsuggestTrain" class="external-link">CTVsuggestTrain
GitHub repo</a>. The CTVsuggest package then loads this
<code>data.frame</code> to output suggestions for different Task Views
as shown in the <a href="#ctvsuggest-example">example</a>.</p>
</div>
<div class="section level2">
<h2 id="the-model">The Model<a class="anchor" aria-label="anchor" href="#the-model"></a>
</h2>
<p>I now provide a high level view of how the model is trained. The <a href="#ctvsuggesttrain">CTVsuggestTrain Section</a> then provides an
overview of the CTVsuggestTrain package which executes the model
training, the section also contains links to the functions documentation
and source code.</p>
<div class="section level3">
<h3 id="multinomial-logistic-regression">Multinomial Logistic Regression<a class="anchor" aria-label="anchor" href="#multinomial-logistic-regression"></a>
</h3>
<p>The model aims to give a Task View suggestion after being giving a
set of features of an unassigned CRAN R package. There exist packages
that are assigned to multiple Task Views, but I have looked at
classifying packages to a single Task View. Therefore, I have set this
up as a multi-class classification problem, compared to a multi-label
problem.</p>
<p>However, it would not be reasonable to assign a Task View to every
package. This would depart from the objective of Task Views<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;&lt;a href="https://github.com/cran-task-views/ctv#cran-task-view-initiative-" class="external-link"&gt;CRAN
Task View Initiative&lt;/a&gt;&lt;/p&gt;'><sup>1</sup></a>, which is
to give a sharp focus on packages that are needed for a task. For this
reason, the model also has the possibility of assigning a package to no
Task View. Therefore, I have included an additional <code>"none"</code>
outcome category and hence the number of possible labels in this
classification problem is the number of Task Views + 1.</p>
<p>To perform this multi-class classification problem I have used a
Multinomial Logistic model with a LASSO penalty, trained using the
<code><a href="https://glmnet.stanford.edu/reference/cv.glmnet.html" class="external-link">glmnet::cv.glmnet()</a></code> function. The <code>cv.glmnet()</code>
function performs cross-validation over a grid of lambda values,
providing a measure of performance for each of the lambda values. I then
select the model which has the lowest average multinomial deviance
across the folds (<code>lambda.min</code>).</p>
</div>
<div class="section level3">
<h3 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h3>
<p>In order to construct the Multinomial Logistic model, I need to
create a set of features for the CRAN packages.</p>
<p>I have used three different types of data to create the features for
this model:<br>
(I let <span class="math inline">\(n\)</span> denote the number of
currently available Task Views)</p>
<ul>
<li>
<a href="#text-data-from-package-and-task-view-descriptions">Text
data from Package and Task View descriptions</a>. <span class="math inline">\(n\)</span> features</li>
<li>
<a href="#package-dependencies">Package dependencies</a>. <span class="math inline">\(n + 1\)</span> features</li>
<li>
<a href="#authors-other-packages">Other Packages developed by the
Authors</a>. <span class="math inline">\(n + 1\)</span> features</li>
</ul>
<p>I will now go into more detail into how I constructed features from
this data.</p>
<div class="section level4">
<h4 id="text-data-from-package-and-task-view-descriptions">Text data from Package and Task View descriptions<a class="anchor" aria-label="anchor" href="#text-data-from-package-and-task-view-descriptions"></a>
</h4>
<ul>
<li>Each Task View has a page with text describing its scope
<ul>
<li>Example: <a href="https://cran.r-project.org/web/views/Econometrics.html" class="external-link">Econometrics
Task View description</a>
</li>
</ul>
</li>
<li>Each package on CRAN has a title and description describing the
purpose of the package
<ul>
<li>Example: <a href="https://cran.r-project.org/web/packages/fxregime/index.html" class="external-link">fxregime
package web page</a>
</li>
</ul>
</li>
</ul>
<p>I extract the Task View text data from their corresponding markdown
files, which are stored in the GitHub repository of the corresponding
Task View. I also extract the titles and descriptions for each of the
packages. I then measure the similarity between the package text to each
Task View text to create <span class="math inline">\(n\)</span>
features.</p>
<!-- For example the [Econometrics Task View Markdown file](https://github.com/cran-task-views/Econometrics/blob/main/Econometrics.md)   is stored in the  Econometrics GitHub repositor. All of the GitHub repositories can be found in the  [cran-task-views](https://github.com/cran-task-views) GitHub account. -->
</div>
<div class="section level4">
<h4 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a>
</h4>
<p>For each package, I look at the immediate hard dependencies to other
packages, and then calculate the proportion of the assignment of these
packages to Task Views.</p>
</div>
<div class="section level4">
<h4 id="authors-other-packages">Authors Other Packages<a class="anchor" aria-label="anchor" href="#authors-other-packages"></a>
</h4>
<p>For each package I look at all of the other packages created by the
authors of that package. I then calculate the proportion of these
packages that are assigned to each Task View.</p>
</div>
</div>
<div class="section level3">
<h3 id="training-data">Training Data<a class="anchor" aria-label="anchor" href="#training-data"></a>
</h3>
<p>To train and test the model I used packages that were assigned a Task
View, I also used a set of packages which I labelled as not belonging to
a Task View. The large proportion of packages not belonging to a Task
View would have not been reviewed by Task View maintainers, and so would
not be representative for packages belonging to the <code>“none”</code>
category.Therefore to choose the packages to include that are labelled
as belonging to the <code>“none”</code> category, we select packages
that have a high amount of monthly downloads</p>
<p>Then from this set of packages I split it with an 80:20 ratio, into a
training and testing set.</p>
</div>
<div class="section level3">
<h3 id="predictions">Predictions<a class="anchor" aria-label="anchor" href="#predictions"></a>
</h3>
<p>Using the trained model, I can get predictions by looking at the
predicted classification probabilities when given the set of features of
a package. I output the predicted classification probabilities for the
packages that are not assigned a Task View and do not meet the monthly
download threshold I mentioned in the previous section.</p>
</div>
<div class="section level3">
<h3 id="accuracy">Accuracy<a class="anchor" aria-label="anchor" href="#accuracy"></a>
</h3>
<p>The accuracy of the model can then be measured by comparing the
trained model predictions with the testing set.</p>
<p>In particular, I set the predicted Task View to be the one with the
largest predicted probability. The accuracy is then measured as the
proportion of correct predictions on the testing set. For packages that
are assigned to multiple Task View, I set a prediction as accurate if
its prediction is one of its assigned Task Views.</p>
</div>
</div>
<div class="section level2">
<h2 id="ctvsuggesttrain">CTVsuggestTrain<a class="anchor" aria-label="anchor" href="#ctvsuggesttrain"></a>
</h2>
<p>First install the <strong>CTVsuggestTrain</strong> package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DylanDijk/CTVsuggestTrain"</span><span class="op">)</span></span></code></pre></div>
<p>As mentioned above, the training of the models is performed with the
<code>CTVsuggestTrain::Train_model()</code> function. This function uses
four internal functions of the CTVsuggestTrain package which are run in
order:</p>
<ul>
<li><p><code>get_data()</code></p></li>
<li><p><code>get_NLP()</code>
<!-- Using all of the text from the Task View I have created a corpus. Then for each word I calculated the term frequency -->
<!-- For each package I have combined the title and description text, then I have vectorised this text as well as the Task View text. -->
<!-- Then for each package I have calculated the cosine similarity between its text vector against all of the Task Views text vectors.  --></p></li>
<li><p><code>get_create_features()</code></p></li>
<li><p><code>get_CRAN_logs()</code></p></li>
</ul>
<!-- Due to the huge number of packages --><!-- that are in CRAN it is infeasible for a Task View maintainer to review all of the available --><!-- packages.Therefore, a model that would give a small selection of high quality suggestions --><!-- for the maintainer to then review would be useful. Such a model would also be useful from the perspective of a package developer. After --><!-- publishing their package onto CRAN, they could then check whether they should propose --><!-- their package to one of the Task View maintainers. --><!-- The model we want to construct should give a Task View suggestion after being giving --><!-- some set of features of an unassigned package. However, it would not be reasonable to --><!-- assign a Task View to every package. This would depart from the objective of Task Views, --><!-- which is to give a sharp focus on packages that are needed for a task. For this reason, the --><!-- model should also have the possibility of assigning a package to no Task View. --><!-- Consequently, the model should have a multicategory response variable, made up of 37 categories. The 36 Task Views with an --><!-- additional “None” category. -->
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Dylan Dijk.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
